<head>
	<meta http-equiv="Content-Security-Policy"
		  content="script-src 'self' https://ckeditor.com 'unsafe-inline' 'unsafe-eval'">
</head>

<style>
[contenteditable="true"] [data-validation-allow]{
	border: 1px solid blue !important;
}

[contenteditable="true"] [data-validation-disallow]{
	border: 1px solid red !important;
}

/* col and colgroup borders must be thicker that their child elements to be visible. */
[contenteditable="true"] col[data-validation-allow],
[contenteditable="true"] col[data-validation-disallow] {
	border-width: 2px !important;
}

[contenteditable="true"] colgroup[data-validation-allow],
[contenteditable="true"] colgroup[data-validation-disallow] {
	border-width: 3px !important;
}
</style>

<div id="editor">
	<figure class="table">
		<table>
			<colgroup>
				<col>
				<col>
				<col>
			</colgroup>
			<caption>caption</caption>
			<thead>
				<tr>
					<th>1</th>
					<th>2</th>
					<th>3</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td>1.1</td>
					<td>1.2</td>
					<td>1.3</td>
				</tr>
				<tr>
					<td>2.1</td>
					<td>2.2</td>
					<td>2.3</td>
				</tr>
				<tr>
					<td>3.1</td>
					<td>3.2</td>
					<td>3.3</td>
				</tr>
			</tbody>
		</table>
	</figure>

	<figure class="table">
		<table>
			<colgroup>
				<col>
				<col>
				<col>
			</colgroup>
			<thead>
				<tr>
					<th>1</th>
					<th>2</th>
					<th>3</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td>1.1</td>
					<td>1.2</td>
					<td>1.3</td>
				</tr>
				<tr>
					<td>2.1</td>
					<td>2.2</td>
					<td>2.3</td>
				</tr>
				<tr>
					<td>3.1</td>
					<td>3.2</td>
					<td>3.3</td>
				</tr>
			</tbody>
		</table>
		<figcaption>figcaption</figcaption>
	</figure>
</div>
<script>
	document.getElementById( 'editor' ).querySelectorAll( 'figure, table, caption, figcaption, tbody, thead, tr, th, td, colgroup, col' ).forEach( node => {
		node.setAttribute( 'data-validation-allow', true );
		node.setAttribute( 'data-validation-disallow', true );
	} );
</script>
